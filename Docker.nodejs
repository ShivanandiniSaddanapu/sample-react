FROM node:trixie-slim AS build
ADD . /nodeapp
WORKDIR /nodeapp
RUN npm install && \
    npm run build

FROM nginx:1.29.3 AS runtime


LABEL author=devopsteam
LABEL project=NODEJS

COPY --from=build /nodeapp/build /usr/share/nginx/html
USER Nandu

WORKDIR /nodeapp
EXPOSE 80